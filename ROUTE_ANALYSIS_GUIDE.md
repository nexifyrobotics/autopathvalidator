# Route Analysis Feature - Quick Start Guide

## What Is Route Analysis?

Route Analysis is a new feature in AutoPathValidator that automatically examines your uploaded robot trajectories to identify problems and suggest improvements. It helps you catch issues before they happen during actual robot execution.

## How to Use

### Step 1: Upload Your Route
1. Use the existing **File Upload** section
2. Select your trajectory JSON file (generated by PathPlanner or WPILib)
3. The system automatically analyzes the route in the background

### Step 2: Check for Issues
After uploading, look at the header for the **Route Analysis button**:
- üî¥ **Red button** = Critical issues found
- üü° **Yellow button** = Warnings detected
- üü¢ **Green button** = No issues (route is good!)

### Step 3: Open the Analysis Report
Click the colored button to open the detailed **Route Analysis Report** modal.

### Step 4: Review the Three Tabs

#### Overview Tab
- **Summary**: Quick status of your route
- **Issues count**: How many problems were found
- **Quick recommendations**: First 3 suggestions to consider

#### Issues Tab
Lists all detected problems with:
- **Problem name**: What went wrong
- **Severity**: ERROR or WARNING
- **Details**: Numerical values (e.g., "Current: 4.2 m/s, Limit: 3.8 m/s")

#### Suggestions Tab
Provides **actionable improvement steps** for each issue:
- **Problem description**: Why this matters
- **Recommended actions**: Specific steps to fix it

### Step 5: Improve Your Route
Use the suggestions to:
1. Adjust waypoint positions in PathPlanner
2. Modify constraint values
3. Regenerate your trajectory
4. Re-upload and verify the fix worked

## What Problems Does It Detect?

| Problem | What It Means | Impact |
|---------|---------------|--------|
| **Velocity Violation** | Speed exceeds robot limit | Robot won't accelerate fast enough |
| **Acceleration Violation** | Acceleration too high | Slipping, instability |
| **Jerk Violation** | Acceleration changes too fast | Jarring movements, wheel skid |
| **Sharp Turns** | Turn radius too tight | Tipping, losing control |
| **Jerky Movement** | Sudden speed changes | Rough motion, poor tracking |
| **Unrealistic Movement** | Impossible position jump | Corrupted trajectory data |
| **Sharp Direction Change** | Path changes direction >120¬∞ | Very tight corner |

## Example Scenarios

### Scenario 1: Velocity Too High
**Error Found**: "Current: 4.5 m/s, Limit: 3.8 m/s"

**Solution**:
- In PathPlanner: Reduce max velocity to 3.5 m/s
- Or: Add more waypoints to reduce acceleration required
- Then: Regenerate and re-upload

### Scenario 2: Sharp Turn
**Warning Found**: "Centripetal accel: 3.2 m/s¬≤, Limit: 2.5 m/s¬≤"

**Solution**:
- Move waypoints farther apart in the turn
- Reduce speed through the turn section
- Increase the curve radius
- Add more waypoints for gentler curve

### Scenario 3: Unrealistic Jump
**Error Found**: "Jump distance: 15.2 m"

**Solution**:
- Check your trajectory file for corruption
- Regenerate from PathPlanner
- Verify coordinate systems match

## Field Visualization

The **Field View** now shows:
- üü¢ **Green dot**: Start point
- üî¥ **Red dot**: End point
- üî¥ **Red line**: Problem area of route
- üü° **Yellow dots**: Specific constraint violations
- üî¥ **Double circle**: Exact spot where first problem starts

## Tips for Best Results

‚úÖ **Do:**
- Review both issues and suggestions
- Address critical errors first
- Test suggestions one at a time
- Re-analyze after making changes
- Keep an eye on the severity indicator

‚ùå **Don't:**
- Ignore critical/error issues
- Try to force robot through problematic routes
- Assume all warnings are safe to ignore
- Skip verification after making changes

## FAQ

**Q: What if my route has no issues?**
A: Great! You'll see a green button with the message "Route is well-formed with no critical issues detected."

**Q: Can I dismiss the issues?**
A: Yes, you can close the modal anytime, but try to address critical issues.

**Q: Do suggestions apply to all robots?**
A: Suggestions are general. Your specific robot may need adjustments based on:
- Weight and dimensions
- Motor capabilities
- Drive system type
- Competition field size

**Q: How accurate is the analysis?**
A: The analysis catches common physics violations. Some edge cases may require domain expertise.

**Q: Can I share analysis results?**
A: Currently, screenshots or exporting the modal content works best. Future versions will have export features.

**Q: What if I think an error is wrong?**
A: Double-check your constraint values. You can modify them in the Constraints Form and re-analyze.

## Next Steps

1. **Try it out**: Upload a route and explore the analysis
2. **Make improvements**: Use suggestions to refine your path
3. **Share feedback**: Let us know what features would help most
4. **Optimize**: Use the analysis repeatedly to achieve the best route

## Troubleshooting

**Route Analysis button doesn't appear?**
- Make sure you've uploaded a valid trajectory file
- Check the browser console for errors
- Try a different trajectory file

**Button is red but I think my route is good?**
- Review the Issues tab - might be minor constraint violations
- Adjust constraints if needed
- Consider the suggestions - they may reveal subtle issues

**Analysis seems wrong?**
- Verify your constraint values are correct
- Check that your trajectory file is valid
- Ensure coordinate systems match your field

---

**Need Help?** Check the main README or contact the development team.
